<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knihovna ƒåerm√°ka a Sta≈àka</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'accent-gold': '#c9a961',
                    }
                }
            }
        }
    </script>
    <style>
        .cinema-gradient {
            background: linear-gradient(135deg, #000000 0%, #1f1f1f 100%);
        }
        
        .event-card {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .event-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fade-in 0.6s ease-out;
        }





    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Navigation -->
    <header class="bg-black shadow-lg sticky top-0 z-50" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-white">Knihovna ƒåerm√°ka a Sta≈àka</h1>
                </div>
                
                <nav class="hidden md:flex space-x-8" id="navLinks">
                    <a href="#home" class="text-white hover:text-red-500 transition-colors duration-200 font-medium">Dom≈Ø</a>
                    <a href="#about" class="text-white hover:text-red-500 transition-colors duration-200 font-medium">O n√°s</a>
                    <a href="#program" class="text-white hover:text-red-500 transition-colors duration-200 font-medium">Program</a>
                    <a href="#team" class="text-white hover:text-red-500 transition-colors duration-200 font-medium">T√Ωm</a>
                    <!-- <a href="#instagram" class="text-white hover:text-red-500 transition-colors duration-200 font-medium">Instagram</a> -->
                    <a href="#gallery" class="text-white hover:text-red-500 transition-colors duration-200 font-medium">Galerie</a>
                    <a href="#contact" class="text-white hover:text-red-500 transition-colors duration-200 font-medium">Kontakt</a>
                </nav>
                
                <div class="hidden md:flex items-center space-x-4" style="display: none;">
                    <button class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium">
                        Newsletter
                    </button>
                </div>
                
                <div class="md:hidden">
                    <button id="hamburger" class="text-white hover:text-red-500 transition-colors duration-200">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Mobile menu -->
            <div id="mobileMenu" class="md:hidden bg-black border-t border-gray-800 hidden">
                <div class="px-2 pt-2 pb-3 space-y-1">
                    <a href="#home" class="block px-3 py-2 text-white hover:text-red-500 transition-colors duration-200">Dom≈Ø</a>
                    <a href="#about" class="block px-3 py-2 text-white hover:text-red-500 transition-colors duration-200">O n√°s</a>
                    <a href="#program" class="block px-3 py-2 text-white hover:text-red-500 transition-colors duration-200">Program</a>
                    <a href="#team" class="block px-3 py-2 text-white hover:text-red-500 transition-colors duration-200">T√Ωm</a>
                    <!-- <a href="#instagram" class="block px-3 py-2 text-white hover:text-red-500 transition-colors duration-200">Instagram</a> -->
                    <a href="#gallery" class="block px-3 py-2 text-white hover:text-red-500 transition-colors duration-200">Galerie</a>
                    <a href="#contact" class="block px-3 py-2 text-white hover:text-red-500 transition-colors duration-200">Kontakt</a>
                    <button class="w-full mt-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200" style="display: none;">
                        Newsletter
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="relative text-white py-16" id="home" style="height: 70vh;">
        <!-- Background Image -->
        <div class="absolute inset-0 z-0">
            <img src="uvodni.jpeg" alt="Knihovna ƒåerm√°ka a Sta≈àka" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-black bg-opacity-60"></div>
        </div>
        
        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full h-full flex items-center">
            <div class="text-center w-full">
                <p class="text-xl md:text-3xl mb-8 text-white max-w-4xl mx-auto leading-relaxed font-light">
                    Jedineƒçn√Ω kulturn√≠ prostor v Hole≈°ovic√≠ch. Najdete v nƒõm knihy, ƒåerm√°ka i Sta≈àka. Minim√°lnƒõ jedno z toho. A taky standup, nat√°ƒçen√≠ podcast≈Ø, Bookclub, workshopy nebo t≈ôeba kv√≠zy. M√°me nejlep≈°√≠ popcorn v Praze, belgick√° piva, kvalitn√≠ whisky i mnoho dal≈°√≠ho.
                </p>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="#program" class="bg-white text-black px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition-all duration-200 transform hover:scale-105">
                        Zobrazit program
                    </a>
                    <a href="#about" class="border-2 border-white text-white px-8 py-3 rounded-lg font-bold hover:bg-white hover:text-black transition-all duration-200 transform hover:scale-105">
                        O klubu
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Program Section -->
    <section id="program" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-black mb-4">
                    Program
                </h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Aktu√°ln√≠ akce a ud√°losti v na≈°em klubu
                </p>
            </div>
            
            <div id="eventsList" class="space-y-8">
                <!-- Events will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="about" class="py-16 bg-black">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
                    Proƒç Knihovna ƒåerm√°ka a Sta≈àka
                </h2>
                <p class="text-lg text-gray-300 max-w-2xl mx-auto">
                    Jedineƒçn√Ω multifunkƒçn√≠ kulturn√≠ prostor na n√°b≈ôe≈æ√≠ Vltavy
                </p>
            </div>
            
            <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-4 mb-16">
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow duration-300 text-center">
                    <div class="text-4xl mb-4">üé≠</div>
                    <h3 class="text-xl font-semibold text-black mb-3">
                        Standup a comedy
                    </h3>
                    <p class="text-gray-600">
                        Pravideln√© stand-up veƒçery s p≈ôedn√≠mi ƒçesk√Ωmi i zahraniƒçn√≠mi komiky
                    </p>
                </div>
                
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow duration-300 text-center">
                    <div class="text-4xl mb-4">üí¨</div>
                    <h3 class="text-xl font-semibold text-black mb-3">
                        Rozhovory a debaty
                    </h3>
                    <p class="text-gray-600">
                        Zveme si zaj√≠mav√© hosty, debatujeme o d≈Øle≈æit√Ωch vƒõcech
                    </p>
                </div>
                
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow duration-300 text-center">
                    <div class="text-4xl mb-4">üéØ</div>
                    <h3 class="text-xl font-semibold text-black mb-3">
                        Workshopy
                    </h3>
                    <p class="text-gray-600">
                        Po≈ô√°d√°me workshopy o AI, m√©di√≠ch i komunikaci. A nab√≠z√≠me prostor i pro va≈°e workshopy
                    </p>
                </div>
                
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow duration-300 text-center">
                    <div class="text-4xl mb-4">üéôÔ∏è</div>
                    <h3 class="text-xl font-semibold text-black mb-3">
                        Podcastov√© Studio
                    </h3>
                    <p class="text-gray-600">
                        Profesion√°ln√≠ nahr√°v√°n√≠ podcast≈Ø a rozhlasov√Ωch po≈ôad≈Ø
                    </p>
                </div>
            </div>
            
            <div class="bg-white rounded-lg p-8 shadow-lg">
                <div class="grid gap-8 md:grid-cols-2">
                    <div>
                        <h3 class="text-2xl font-bold text-black mb-4">O klubu</h3>
                        <p class="text-gray-600 mb-4" id="aboutMainText">Naƒç√≠t√°n√≠...</p>
                        <p class="text-gray-600 mb-6" id="aboutDescription">Naƒç√≠t√°n√≠...</p>
                        
                        <h4 class="text-lg font-semibold text-black mb-2">Otev√≠rac√≠ doba</h4>
                        <p class="text-gray-600" id="openingHours">Naƒç√≠t√°n√≠...</p>
                    </div>
                    
                    <div class="grid gap-4 grid-cols-2">
                        <img src="interier.jpeg" alt="Interi√©r klubu" class="rounded-lg shadow-md">
                        <img src="studio.jpeg" alt="Podcastov√© studio" class="rounded-lg shadow-md">
                        <img src="sal.jpeg" alt="Hlavn√≠ s√°l" class="rounded-lg shadow-md">
                        <img src="bar.jpeg" alt="Bar" class="rounded-lg shadow-md">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Team Section -->
    <section id="team" class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-black mb-4">
                    Osoby a obsazen√≠
                </h2>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                    Lep≈°√≠ ne≈æ si mysl√≠te
                </p>
            </div>
            
            <div class="grid gap-8 md:grid-cols-2 max-w-4xl mx-auto">
                <!-- Milo≈° -->
                <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                    <img src="milos.avif" alt="Milo≈° ƒåerm√°k" class="w-full h-64 object-cover" style="object-position: center top" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 400 300\\'><rect fill=\\'%23e0e0e0\\'/><text x=\\'50%\\' y=\\'50%\\' text-anchor=\\'middle\\' font-size=\\'20\\' fill=\\'%23999\\'>Milo≈° ƒåerm√°k</text></svg>'">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold text-black mb-2">Milo≈° ƒåerm√°k</h3>
                        <p class="text-gray-600 mb-4">
                            G√©nius k pronajmut√≠
                        </p>
                        <div class="flex space-x-4">
                            <a href="http://www.jednoprocento.cz" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800 transition-colors duration-200" title="Web">
                                <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.621 5.367 11.988 11.988 11.988s11.987-5.367 11.987-11.988C24.004 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.348-1.051-2.348-2.348s1.051-2.348 2.348-2.348 2.348 1.051 2.348 2.348-1.051 2.348-2.348 2.348zm7.718 0c-1.297 0-2.348-1.051-2.348-2.348s1.051-2.348 2.348-2.348 2.348 1.051 2.348 2.348-1.051 2.348-2.348 2.348z"/>
                                </svg>
                            </a>
                            <a href="https://x.com/cermak" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800 transition-colors duration-200" title="Twitter">
                                <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Ludƒõk -->
                <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                    <img src="ludek.avif" alt="Ludƒõk Stanƒõk" class="w-full h-64 object-cover" style="object-position: center top" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 400 300\\'><rect fill=\\'%23e0e0e0\\'/><text x=\\'50%\\' y=\\'50%\\' text-anchor=\\'middle\\' font-size=\\'20\\' fill=\\'%23999\\'>Ludƒõk Stanƒõk</text></svg>'">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold text-black mb-2">Ludƒõk Stanƒõk</h3>
                        <p class="text-gray-600 mb-4">
                            Zjistil, ≈æe je chytr√Ω
                        </p>
                        <div class="flex space-x-4">
                            <a href="https://x.com/ludekstanek" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800 transition-colors duration-200" title="Twitter">
                                <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                </svg>
                            </a>
                            <a href="https://www.instagram.com/ludek.stanek" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800 transition-colors duration-200" title="Instagram">
                                <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Instagram Section - TEMPORARILY HIDDEN -->
    <section id="instagram" class="py-16 bg-black" style="display: none;">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
                    N√°≈° Instagram
                </h2>
                <p class="text-xl text-gray-300 max-w-2xl mx-auto mb-6">
                    Sledujte n√°s pro nejnovƒõj≈°√≠ fotky z akc√≠ a z√°kulis√≠
                </p>
                <a href="https://www.instagram.com/cermakstanekcomedy" target="_blank" rel="noopener noreferrer" class="inline-flex items-center bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-bold hover:from-purple-700 hover:to-pink-700 transition-all duration-200">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.621 5.367 11.988 11.988 11.988s11.987-5.367 11.987-11.988C24.004 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.348-1.051-2.348-2.348s1.051-2.348 2.348-2.348 2.348 1.051 2.348 2.348-1.051 2.348-2.348 2.348zm7.718 0c-1.297 0-2.348-1.051-2.348-2.348s1.051-2.348 2.348-2.348 2.348 1.051 2.348 2.348-1.051 2.348-2.348 2.348z"/>
                    </svg>
                    Sledovat @cermakstanekcomedy
                </a>
            </div>
            
            <!-- NoCodeAPI Instagram Feed Integration -->
            <script type="module" src="https://unpkg.com/@nocodeapi/embed-instagram-feed@latest/embed-instagram-feed.js?module"></script>
            
            <div class="instagram-container">
                <!-- Instagram feed will be loaded automatically via NoCodeAPI -->
                <embed-instagram-feed 
                    url="https://v1.nocodeapi.com/YOUR_ENDPOINT_HERE/instagram/YOUR_KEY_HERE"
                    class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                </embed-instagram-feed>
            </div>
            
            <!-- Fallback for when NoCodeAPI is not available -->
            <div id="instagramFallback" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" style="display: none;">
                <!-- Fallback Instagram photos will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="py-16 bg-black">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
                    Galerie
                </h2>
                <p class="text-lg text-gray-300 max-w-2xl mx-auto">
                    Pod√≠vejte se na n√°≈° klub a atmosf√©ru na≈°ich akc√≠
                </p>
            </div>
            
            <div id="galleryGrid" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                <!-- Gallery images will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Newsletter Section - Temporarily Hidden -->
    <section class="cinema-gradient text-white py-16" style="display: none;">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">
                    Z≈Østa≈àte v obraze
                </h2>
                <p class="text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
                    P≈ôihlaste se k newsletteru a nezme≈°kejte ≈æ√°dn√© akce, debaty ani stand-up veƒçery
                </p>
                
                <div id="newsletterSuccess" class="bg-green-600 text-white p-4 rounded-lg max-w-md mx-auto mb-6 hidden">
                    <p class="font-semibold">Dƒõkujeme za p≈ôihl√°≈°en√≠!</p>
                    <p class="text-sm">Budeme v√°s informovat o nov√Ωch akc√≠ch.</p>
                </div>
                
                <form id="newsletterForm" class="max-w-md mx-auto">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="email" id="newsletterEmail" placeholder="Zadejte va≈°i e-mailovou adresu" class="flex-1 px-4 py-3 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-red-500" required>
                        <button type="submit" class="bg-red-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-red-700 transition-colors duration-200 transform hover:scale-105">
                            P≈ôihl√°sit se
                        </button>
                    </div>
                </form>
                
                <div class="mt-8 flex justify-center space-x-6">
                    <a href="#" class="text-gray-300 hover:text-white transition-colors duration-200">
                        <span class="sr-only">Facebook</span>
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/>
                        </svg>
                    </a>
                    <a href="#" class="text-gray-300 hover:text-white transition-colors duration-200">
                        <span class="sr-only">Instagram</span>
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.621 5.367 11.988 11.988 11.988s11.987-5.367 11.987-11.988C24.004 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.348-1.051-2.348-2.348s1.051-2.348 2.348-2.348 2.348 1.051 2.348 2.348-1.051 2.348-2.348 2.348zm7.718 0c-1.297 0-2.348-1.051-2.348-2.348s1.051-2.348 2.348-2.348 2.348 1.051 2.348 2.348-1.051 2.348-2.348 2.348z"/>
                        </svg>
                    </a>
                    <a href="#" class="text-gray-300 hover:text-white transition-colors duration-200">
                        <span class="sr-only">Twitter</span>
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-4">
                <div>
                    <h3 class="text-2xl font-bold mb-4">Knihovna ƒåerm√°ka a Sta≈àka</h3>
                    <p class="text-gray-400 mb-4">
                        Multifunkƒçn√≠ kulturn√≠ klub na n√°b≈ôe≈æ√≠ Vltavy. M√≠sto pro debaty, standup, workshopy a podcasty.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">
                            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/>
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">
                            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.621 5.367 11.988 11.988 11.988s11.987-5.367 11.987-11.988C24.004 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.348-1.051-2.348-2.348s1.051-2.348 2.348-2.348 2.348 1.051 2.348 2.348-1.051 2.348-2.348 2.348zm7.718 0c-1.297 0-2.348-1.051-2.348-2.348s1.051-2.348 2.348-2.348 2.348 1.051 2.348 2.348-1.051 2.348-2.348 2.348z"/>
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">
                            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"/>
                            </svg>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Rychl√© odkazy</h4>
                    <ul class="space-y-2">
                        <li><a href="#program" class="text-gray-400 hover:text-white transition-colors duration-200">Aktu√°ln√≠ program</a></li>
                        <li><a href="#about" class="text-gray-400 hover:text-white transition-colors duration-200">O klubu</a></li>
                        <li><a href="#contact" class="text-gray-400 hover:text-white transition-colors duration-200">Kontakt</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Na≈°e slu≈æby</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">Standup comedy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">Rozhovory a debaty</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">Worshopy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">Nahr√°v√°n√≠ podcast≈Ø</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Kontakt</h4>
                    <div class="space-y-2 text-gray-400">
                        <p id="contactAddress">Naƒç√≠t√°n√≠...</p>
                        <p class="mt-4">
                            <a href="#" id="contactPhone" class="hover:text-white transition-colors duration-200">Naƒç√≠t√°n√≠...</a>
                        </p>
                        <p>
                            <a href="#" id="contactEmail" class="hover:text-white transition-colors duration-200">Naƒç√≠t√°n√≠...</a>
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 Knihovna ƒåerm√°ka a Sta≈àka. V≈°echna pr√°va vyhrazena.</p>
            </div>
        </div>
    </footer>



    <!-- Event Detail Modal -->
    <div id="eventModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="relative">
                <button onclick="closeEventDetail()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 z-10 bg-white rounded-full p-1">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <div id="eventModalContent">
                    <!-- Event detail content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        // Supabase configuration
        const SUPABASE_URL = 'https://eyfgtagudbvzorrdntdf.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV5Zmd0YWd1ZGJ2em9ycmRudGRmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4MzEwMDMsImV4cCI6MjA3MDQwNzAwM30.uw5k8YWuIzM2Q1e8dzwSKXJBlA_wViVdAvtue6Qx0A0';
        
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // Initialize data storage
        let events = [];
        let galleryImages = [];
        
        // External ticket sales URL
        let EXTERNAL_TICKET_URL = '';

        // Navigation scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Mobile menu toggle
        document.getElementById('hamburger').addEventListener('click', () => {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    // Close mobile menu if open
                    const mobileMenu = document.getElementById('mobileMenu');
                    if (mobileMenu) {
                        mobileMenu.classList.add('hidden');
                    }
                }
            });
        });

        // Fade in animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        
        // Newsletter form handling
        document.getElementById('newsletterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('newsletterEmail').value;
            if (email) {
                // Store newsletter subscription
                const subscribers = JSON.parse(localStorage.getItem('subscribers') || '[]');
                if (!subscribers.includes(email)) {
                    subscribers.push(email);
                    localStorage.setItem('subscribers', JSON.stringify(subscribers));
                }
                
                // Show success message
                document.getElementById('newsletterSuccess').classList.remove('hidden');
                document.getElementById('newsletterForm').classList.add('hidden');
                
                // Hide success message after 3 seconds and show form again
                setTimeout(() => {
                    document.getElementById('newsletterSuccess').classList.add('hidden');
                    document.getElementById('newsletterForm').classList.remove('hidden');
                    document.getElementById('newsletterEmail').value = '';
                }, 3000);
            }
        });

        // Load events from Supabase
        async function loadEvents() {
            console.log('Loading events from Supabase...');
            try {
                const { data, error } = await supabase
                    .from('events')
                    .select('*')
                    .order('date', { ascending: true });
                    
                if (error) throw error;
                
                // Transform Supabase data to match our format
                const transformedEvents = (data || []).map(event => ({
                    id: event.id,
                    title: event.title,
                    // type removed for simplification
                    date: event.date,
                    time: event.time,
                    description: event.description,
                    image: event.image,
                    shopLink: event.shop_link || '',
                    buttonText: event.button_text || ''
                }));
                
                events = transformedEvents;
                console.log(`Loaded ${events.length} events:`, events);
                
                renderEvents();
            } catch (error) {
                console.error('Error loading events:', error);
                // Show empty state if Supabase fails
                events = [];
                renderEvents();
            }
        }

        // Instagram feed management (fallback system)
        async function loadInstagramPhotos() {
            console.log('Checking if NoCodeAPI Instagram feed is working...');
            
            // Wait a moment to see if NoCodeAPI loads
            setTimeout(() => {
                const embedElement = document.querySelector('embed-instagram-feed');
                const fallbackElement = document.getElementById('instagramFallback');
                
                if (embedElement && embedElement.children.length === 0) {
                    console.log('NoCodeAPI not working, using fallback...');
                    loadInstagramPhotosFallback();
                    fallbackElement.style.display = 'grid';
                } else {
                    console.log('NoCodeAPI Instagram feed loaded successfully');
                    fallbackElement.style.display = 'none';
                }
            }, 3000); // Wait 3 seconds for NoCodeAPI to load
        }

        // Fallback: Load Instagram photos from admin-managed collection
        async function loadInstagramPhotosFallback() {
            console.log('Loading Instagram photos from admin collection as fallback...');
            try {
                const { data, error } = await supabase
                    .from('instagram_photos')
                    .select('*')
                    .order('created_at', { ascending: false })
                    .limit(12); // Limit to 12 most recent photos
                    
                if (error) throw error;
                
                const instagramPhotos = data || [];
                console.log(`Loaded ${instagramPhotos.length} Instagram photos:`, instagramPhotos);
                
                renderInstagramFeedFallback(instagramPhotos);
                
            } catch (error) {
                console.error('Error loading Instagram photos from Supabase:', error);
                // Fallback to localStorage if available
                const storedPhotos = localStorage.getItem('instagramPhotos');
                if (storedPhotos) {
                    const instagramPhotos = JSON.parse(storedPhotos).slice(0, 12);
                    renderInstagramFeedFallback(instagramPhotos);
                }
            }
        }

        function renderInstagramFeedFallback(photos) {
            const instagramFallback = document.getElementById('instagramFallback');
            
            if (!instagramFallback) {
                console.error('instagramFallback element not found!');
                return;
            }
            
            if (photos.length === 0) {
                console.log('No Instagram photos to display');
                instagramFallback.innerHTML = '<div class="col-span-full text-center py-8"><p class="text-gray-400">Zat√≠m nejsou p≈ôidan√© ≈æ√°dn√© fotky.</p></div>';
                return;
            }
            
            instagramFallback.innerHTML = photos.map(photo => `
                <div class="aspect-square bg-gray-800 rounded-lg overflow-hidden hover:scale-105 transition-transform duration-200">
                    <img 
                        src="${photo.url}" 
                        alt="${photo.caption || 'Instagram post'}" 
                        class="w-full h-full object-cover"
                        onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\\'w-full h-full bg-gray-700 flex items-center justify-center\\'>üì∑</div>'"
                    >
                </div>
            `).join('');
        }
        
        // Event management
        function renderEvents() {
            console.log('Rendering events:', events);
            const eventsList = document.getElementById('eventsList');
            
            if (!eventsList) {
                console.error('eventsList element not found!');
                return;
            }
            
            if (events.length === 0) {
                console.log('No events to display');
                eventsList.innerHTML = '<div class="text-center py-8"><p class="text-gray-600">Zat√≠m nejsou napl√°novan√© ≈æ√°dn√© ud√°losti.</p></div>';
                return;
            }
            
            // Sort events by date and limit to 10 upcoming events
            const sortedEvents = [...events]
                .sort((a, b) => new Date(a.date) - new Date(b.date))
                .slice(0, 10);

            // Group events by date
            const eventsByDate = {};
            sortedEvents.forEach(event => {
                const date = new Date(event.date);
                const dateKey = date.toLocaleDateString('cs-CZ', { weekday: 'long', day: 'numeric', month: 'long' });
                if (!eventsByDate[dateKey]) {
                    eventsByDate[dateKey] = [];
                }
                eventsByDate[dateKey].push(event);
            });

            // Render events
            let html = '';
            Object.keys(eventsByDate).forEach(dateKey => {
                html += `
                    <div class="bg-black rounded-lg p-6">
                        <h3 class="text-xl font-bold text-white mb-4">${dateKey.charAt(0).toUpperCase() + dateKey.slice(1)}</h3>
                        <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                `;
                
                eventsByDate[dateKey].forEach(event => {
                    html += `
                        <div class="event-card bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg border border-gray-200 cursor-pointer" onclick="showEventDetail(${event.id})">
                            ${event.image ? `
                                <img src="${event.image.includes('cloudinary.com') ? event.image.replace('/upload/', '/upload/f_auto/') : event.image}" alt="${event.title}" class="w-full h-32 object-cover" onerror="this.style.display='none'">
                            ` : ''}
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-3">
                                    <div class="text-2xl font-bold text-red-600">
                                        ${event.time.slice(0, 5)}
                                    </div>
                                </div>
                                <h4 class="text-lg font-semibold text-black mb-2">
                                    ${event.title}
                                </h4>
                                <p class="text-gray-600 text-sm mb-3 line-clamp-2">
                                    ${event.description}
                                </p>
                                <div class="flex justify-between items-center">
                                    <!-- Removed status text for cleaner design -->
                                    <button class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 text-sm font-medium" onclick="event.stopPropagation(); showEventDetail(${event.id})">
                                        V√≠ce info
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });

            // Add "Show all events" button if there are more than 10 events
            if (events.length > 10) {
                html += `
                    <div class="text-center py-8">
                        <a href="program.html" class="inline-block bg-red-600 text-white px-8 py-3 rounded-lg hover:bg-red-700 transition-colors duration-200 font-bold">
                            Zobrazit v≈°echny akce (${events.length})
                        </a>
                    </div>
                `;
            }

            eventsList.innerHTML = html || '<div class="text-center py-12"><p class="text-gray-500 text-lg">≈Ω√°dn√© ud√°losti v t√©to kategorii</p></div>';
        }

        // Initial render
        renderEvents();



        // Delete event
        async function deleteEvent(id) {
            if (confirm('Opravdu chcete smazat tuto ud√°lost?')) {
                try {
                    const { error } = await supabase
                        .from('events')
                        .delete()
                        .eq('id', id);
                    
                    if (error) throw error;
                    
                    // Reload events from Supabase
                    await loadEvents();
                } catch (error) {
                    console.error('Error deleting event:', error);
                    alert('Chyba p≈ôi maz√°n√≠ ud√°losti');
                }
            }
        }





        function renderGallery() {
            const galleryGrid = document.getElementById('galleryGrid');
            
            if (galleryImages.length === 0) {
                galleryGrid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <p class="text-gray-400 text-lg">Zat√≠m nem√°me ≈æ√°dn√© fotky v galerii</p>
                    </div>
                `;
                return;
            }
            
            // Show only first 12 images (3 rows of 4)
            const limitedImages = galleryImages.slice(0, 12);
            
            let galleryHtml = limitedImages.map(image => `
                <div class="group relative overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <img 
                        src="${image.url}" 
                        alt="${image.description}"
                        class="w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"
                        onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 400 300\\'><rect fill=\\'%23e0e0e0\\'/><text x=\\'50%\\' y=\\'50%\\' text-anchor=\\'middle\\' font-size=\\'20\\' fill=\\'%23999\\'>Obr√°zek nenalezen</text></svg>'"
                    >
                    <div class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                        <div class="p-4 text-white">
                            <h3 class="text-lg font-semibold">${image.description}</h3>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Add "Show all photos" button if there are more than 12 photos
            if (galleryImages.length > 12) {
                galleryHtml += `
                    <div class="col-span-full flex justify-center py-8">
                        <a href="galerie.html" class="inline-block bg-red-600 text-white px-8 py-3 rounded-lg hover:bg-red-700 transition-colors duration-200 font-bold">
                            Zobrazit v√≠ce fotek (${galleryImages.length})
                        </a>
                    </div>
                `;
            }
            
            galleryGrid.innerHTML = galleryHtml;
        }


        // Event detail modal functions
        function showEventDetail(eventId) {
            const event = events.find(e => e.id === eventId);
            if (!event) {
                alert('Ud√°lost nenalezena.');
                return;
            }
            
            // Update URL hash for sharing
            window.history.pushState(null, null, `#udalost/${eventId}`);
            
            const eventDate = new Date(event.date);
            const formattedDate = eventDate.toLocaleDateString('cs-CZ', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Type labels removed for simplification
            
            // Get current contact address from the page
            const contactAddressElement = document.getElementById('contactAddress');
            const currentAddress = contactAddressElement ? contactAddressElement.innerHTML : 'Knihovna ƒåerm√°ka a Sta≈àka';
            
            const modalContent = document.getElementById('eventModalContent');
            modalContent.innerHTML = `
                ${event.image ? `
                    <img src="${event.image.includes('cloudinary.com') ? event.image.replace('/upload/', '/upload/f_auto/') : event.image}" alt="${event.title}" class="w-full h-64 object-cover rounded-t-lg" onerror="this.style.display='none'">
                ` : ''}
                <div class="p-6">
                    <div class="mb-4">
                        <span class="inline-block bg-black text-white text-sm font-medium px-3 py-1 rounded-full mb-2">
                            Ud√°lost
                        </span>
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">${event.title}</h1>
                        <div class="flex items-center text-gray-600 mb-4">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            ${formattedDate}
                        </div>
                        <div class="flex items-center text-gray-600 mb-6">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            ${event.time.slice(0, 5)}
                        </div>
                    </div>
                    
                    <div class="prose max-w-none mb-6">
                        <p class="text-gray-700 leading-relaxed">${event.description}</p>
                    </div>
                    
                    <div class="border-t pt-6">
                        ${event.shopLink || EXTERNAL_TICKET_URL ? `
                            <a href="${event.shopLink || EXTERNAL_TICKET_URL}" target="_blank" rel="noopener noreferrer" class="inline-block bg-red-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-red-700 transition-colors duration-200">
                                üé´ Koupit vstupenky
                            </a>
                        ` : `
                            <span class="inline-block bg-gray-600 text-white px-8 py-3 rounded-lg font-bold">
                                ${event.buttonText || '‚ÑπÔ∏è V√≠ce info na m√≠stƒõ'}
                            </span>
                        `}
                        <div class="mt-4 text-sm text-gray-500">
                            <p>üìç ${currentAddress}</p>
                            <p class="mt-1">Kapacita: 50 m√≠st</p>
                        </div>
                    </div>
                </div>
            `;
            
            // Show modal
            document.getElementById('eventModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        function closeEventDetail() {
            document.getElementById('eventModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            // Clear URL hash
            window.history.pushState(null, null, window.location.pathname);
        }
        
        // Close modal when clicking outside
        document.getElementById('eventModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeEventDetail();
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeEventDetail();
            }
        });

        // Load all content from Supabase
        async function loadAllContent() {
            console.log('Loading all content from Supabase...');
            try {
                const { data, error } = await supabase
                    .from('settings')
                    .select('*');
                    
                if (error) throw error;
                
                console.log('Settings loaded:', data);
                
                if (data && data.length > 0) {
                    data.forEach(setting => {
                        console.log(`Processing setting: key="${setting.key}", value="${setting.value?.substring(0, 50)}..."`);
                        switch(setting.key) {
                            case 'about_text':
                                const aboutMainText = document.getElementById('aboutMainText');
                                if (aboutMainText) {
                                    aboutMainText.textContent = setting.value;
                                }
                                // Also populate admin form
                                const aboutTextAdmin = document.getElementById('aboutText');
                                if (aboutTextAdmin) {
                                    aboutTextAdmin.value = setting.value;
                                }
                                break;
                                
                            case 'about_description':
                                const aboutDescription = document.getElementById('aboutDescription');
                                if (aboutDescription) {
                                    aboutDescription.textContent = setting.value;
                                }
                                break;
                                
                            case 'opening_hours':
                                const openingHoursDisplay = document.getElementById('openingHours');
                                if (openingHoursDisplay) {
                                    openingHoursDisplay.innerHTML = '<strong>' + setting.value.replace('<br>', '</strong><br><strong>') + '</strong>';
                                }
                                // Also populate admin form
                                const openingHoursAdmin = document.getElementById('adminOpeningHours');
                                if (openingHoursAdmin) {
                                    openingHoursAdmin.value = setting.value;
                                }
                                break;
                                
                            case 'contact_address':
                                const contactAddressDisplay = document.getElementById('contactAddress');
                                if (contactAddressDisplay) {
                                    contactAddressDisplay.innerHTML = setting.value;
                                }
                                // Also populate admin form
                                const contactAddressAdmin = document.getElementById('adminContactAddress');
                                if (contactAddressAdmin) {
                                    contactAddressAdmin.value = setting.value;
                                }
                                break;
                                
                            case 'contact_email':
                                const contactEmailDisplay = document.getElementById('contactEmail');
                                if (contactEmailDisplay) {
                                    contactEmailDisplay.textContent = setting.value;
                                }
                                // Also populate admin form
                                const contactEmailAdmin = document.getElementById('adminContactEmail');
                                if (contactEmailAdmin) {
                                    contactEmailAdmin.value = setting.value;
                                }
                                break;
                                
                            case 'contact_phone':
                                const contactPhoneDisplay = document.getElementById('contactPhone');
                                if (contactPhoneDisplay) {
                                    contactPhoneDisplay.textContent = setting.value;
                                }
                                // Also populate admin form
                                const contactPhoneAdmin = document.getElementById('adminContactPhone');
                                if (contactPhoneAdmin) {
                                    contactPhoneAdmin.value = setting.value;
                                }
                                break;
                                
                            case 'external_ticket_url':
                                EXTERNAL_TICKET_URL = setting.value || '';
                                console.log('External ticket URL loaded:', EXTERNAL_TICKET_URL);
                                break;
                        }
                    });
                }
            } catch (error) {
                console.error('Error loading content:', error);
                
                // Try to load from localStorage first
                const storedAboutText = localStorage.getItem('aboutText');
                if (storedAboutText) {
                    const aboutMainText = document.getElementById('aboutMainText');
                    if (aboutMainText) {
                        aboutMainText.textContent = storedAboutText;
                    }
                    const aboutTextAdmin = document.getElementById('aboutText');
                    if (aboutTextAdmin) {
                        aboutTextAdmin.value = storedAboutText;
                    }
                }
                
                // Fallback values for other fields
                const fallbacks = {
                    aboutMainText: storedAboutText || 'Knihovna ƒåerm√°ka a Sta≈àka je multifunkƒçn√≠ kulturn√≠ klub s kapacitou 50 m√≠st. Nab√≠z√≠me jedineƒçn√Ω prostor pro debaty, standup comedy, kv√≠zy a nahr√°v√°n√≠ podcast≈Ø.',
                    aboutDescription: 'N√°≈° klub spojuje tradici liter√°rn√≠ch debat s modern√≠mi form√°ty z√°bavy. M√°me vlastn√≠ podcastov√© studio a pravidelnƒõ po≈ô√°d√°me tematick√© veƒçery.',
                    openingHours: localStorage.getItem('opening_hours') || '<strong>√öt‚Äìƒåt:</strong> 18:00‚Äì23:00<br><strong>P√°‚ÄìSo:</strong> 18:00‚Äì01:00<br><strong>Ne‚ÄìPo:</strong> Zav≈ôeno',
                    contactAddress: localStorage.getItem('contact_address') || 'N√°rodn√≠ 28<br>110 00 Praha 1',
                    contactEmail: localStorage.getItem('contact_email') || 'info@knihovnacs.cz',
                    contactPhone: localStorage.getItem('contact_phone') || '+420 234 567 890'
                };
                
                Object.entries(fallbacks).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.innerHTML = value;
                    }
                });
            }
        }

        // Newsletter form already handled above

        // Force refresh all data
        async function forceRefreshData() {
            console.log('Force refreshing all data...');
            await loadEvents();
            await loadAllContent();
            await loadGalleryImages();
        }

        // Load gallery images from Supabase with localStorage sync
        async function loadGalleryImages() {
            console.log('Loading gallery images...');
            try {
                // First try Supabase
                const { data, error } = await supabase
                    .from('gallery')
                    .select('*')
                    .order('created_at', { ascending: false });
                    
                if (error) throw error;
                
                galleryImages = data || [];
                
                // Also update localStorage for offline use
                localStorage.setItem('galleryImages', JSON.stringify(galleryImages));
                
                console.log(`Loaded ${galleryImages.length} gallery images from Supabase`);
                
            } catch (error) {
                console.error('Error loading gallery from Supabase:', error);
                // Fallback to localStorage if Supabase fails
                console.log('Supabase failed, loading from localStorage...');
                const storedImages = localStorage.getItem('galleryImages');
                if (storedImages) {
                    console.log('Loading gallery from localStorage');
                    galleryImages = JSON.parse(storedImages);
                } else {
                    console.log('No gallery found, using defaults');
                    // Add some default gallery images
                    galleryImages = [
                        {
                            id: 1,
                            url: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600&h=400&fit=crop',
                            description: 'Hlavn√≠ s√°l klubu',
                            date: new Date().toISOString()
                        },
                        {
                            id: 2,
                            url: 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=600&h=400&fit=crop',
                            description: 'Atmosf√©ra bƒõhem debaty',
                            date: new Date().toISOString()
                        },
                        {
                            id: 3,
                            url: 'https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=600&h=400&fit=crop',
                            description: 'Podcastov√© studio',
                            date: new Date().toISOString()
                        }
                    ];
                    localStorage.setItem('galleryImages', JSON.stringify(galleryImages));
                }
            }
            renderGallery();
        }

        // Initialize the application
        async function initApp() {
            await loadEvents();
            await loadAllContent();
            await loadGalleryImages();
            await loadInstagramPhotos();
        }
        
        // Handle URL routing for event sharing
        function handleHashChange() {
            const hash = window.location.hash;
            if (hash.startsWith('#udalost/')) {
                const eventId = parseInt(hash.replace('#udalost/', ''));
                if (eventId && events.length > 0) {
                    showEventDetail(eventId);
                }
            }
        }
        
        // Listen for hash changes
        window.addEventListener('hashchange', handleHashChange);
        
        // Start the app when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', async () => {
                await initApp();
                // Check if URL has event hash after loading
                handleHashChange();
            });
        } else {
            initApp().then(() => {
                // Check if URL has event hash after loading
                handleHashChange();
            });
        }

        // Auto-refresh data every 15 seconds
        setInterval(async function() {
            if (!document.hidden) {
                console.log('Auto-refreshing data from Supabase...');
                await loadEvents();
                await loadGalleryImages();
                await loadInstagramPhotos();
            }
        }, 15000);

        // Refresh data when page gains focus (returning from admin panel)
        window.addEventListener('focus', function() {
            // Delay to ensure localStorage is updated
            setTimeout(async () => {
                console.log('Page gained focus, refreshing data...');
                await loadEvents();
                await loadAllContent();
                await loadGalleryImages();
                await loadInstagramPhotos();
            }, 100);
        });

        // Also listen for storage events (when localStorage changes in another tab)
        window.addEventListener('storage', function(e) {
            if (e.key === 'events' || e.key === 'galleryImages' || e.key === 'instagramPhotos') {
                console.log('localStorage changed, refreshing data...');
                setTimeout(async () => {
                    if (e.key === 'events') {
                        await loadEvents();
                    }
                    if (e.key === 'galleryImages') {
                        await loadGalleryImages();
                    }
                    if (e.key === 'instagramPhotos') {
                        await loadInstagramPhotos();
                    }
                }, 100);
            }
        });


    </script>
</body>
</html>